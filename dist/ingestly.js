!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n.r(t);var r,i=function(e,t){var n=new XMLHttpRequest;return"function"==typeof t&&(n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){var e;try{e=JSON.parse(n.response)}catch(e){return e}t.call(null,e)}}),n.open("GET",e,!0),n.timeout=4e3,n.withCredentials=!0,n.send(),!0},a=function(e){var t=(+new Date).toString(36),n=document.location&&"https:"===document.location.protocol?"https:":"http:";return"".concat(n,"//").concat(r.endpoint,"/").concat(e,"/").concat(t,"/?key=").concat(r.apiKey,"&sdk=").concat(r.sdkName,"-").concat(r.sdkVersion)},c=function(e,t){return void 0!==t&&""!==t&&"{}"!==t?"&".concat(e,"=").concat(encodeURIComponent(t)):""},d=!0,l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=t}var t,n,l;return t=e,(n=[{key:"emit",value:function(e){var t=a("ingestly-ingest"),n={ingestlyId:r.deviceId,rootId:r.rootId,action:e.action,category:e.category,sinceInitMs:e.sinceInitMs,sincePrevMs:e.sincePrevMs,usId:e.userId,usStatus:e.userStatus,usAttr:JSON.stringify(e.userAttr),pgUrl:e.pageUrl,pgReferrer:e.pageReferrer,pgTitle:e.pageTitle,pgAttr:JSON.stringify(e.pageAttr),cnId:e.contentId,cnHeadline:e.contentHeadline,cnStatus:e.contentStatus,cnAttr:JSON.stringify(e.contentAttr),vpHeight:e.client.vpH,vpWidth:e.client.vpW,scHeight:e.client.scH,scWidth:e.client.scW,scOrientation:e.client.scOrientation,dvType:e.client.dvType,dvOs:e.client.dvOs,dvPlatform:e.client.dvPlatform,ptInteractive:e.pt?e.pt.interactive:void 0,ptDcl:e.pt?e.pt.dcl:void 0,ptComplete:e.pt?e.pt.complete:void 0,srDepth:e.srDepth,srUnit:e.srUnit,pgHeight:e.pgH,rdRate:e.rdRate,txLength:e.txL,ctHeight:e.tgH,clTag:e.clTag,clId:e.clId,clClass:e.clClass,clPath:e.clPath,clLink:e.clLink,clAttr:JSON.stringify(e.clAttr),mdSrc:e.mdSrc,mdCurrentTime:e.mdCurrentTime,mdDuration:e.mdDuration,mdPlayedPercent:e.mdPlayedPercent,mdAttr:JSON.stringify(e.mdAttr),cpCode:e.campaignCode,cpName:e.campaignName,cpSource:e.campaignSource,cpMedium:e.campaignMedium,cpTerm:e.campaignTerm,cpContent:e.campaignContent,urProtocol:e.pur.protocol,urHost:e.pur.hostname,urPath:e.pur.pathname,urSearch:e.pur.search,urHash:e.pur.hash,urQuery:JSON.stringify(e.pur.query),rfProtocol:e.prf.protocol,rfHost:e.prf.hostname,rfPath:e.prf.pathname,rfSearch:e.prf.search,rfHash:e.prf.hash,rfQuery:JSON.stringify(e.prf.query),customAttr:JSON.stringify(e.customAttr)};for(var o in n)t+=c(o,n[o]);if("sendBeacon"in navigator&&"function"==typeof navigator.sendBeacon&&!0===d){try{navigator.sendBeacon(t)}catch(e){d=!1}if(!d)if("fetch"in window[r.target]&&"function"==typeof window[r.target].fetch){var l=new AbortController,u={signal:l.signal,method:"POST",cache:"no-store",keepalive:!0};setTimeout(function(){return l.abort()},4e3),window[r.target].fetch(t,u)}else i(t)}else i(t)}},{key:"getDeviceId",value:function(e){var t=a("ingestly-sync");if(t+="&ingestlyId=".concat(r.deviceId),"fetch"in window[r.target]&&"function"==typeof window[r.target].fetch&&"AbortController"in window[r.target]&&"function"==typeof window[r.target].AbortController){var n=new AbortController,o={signal:n.signal,method:"GET",cache:"no-store",keepalive:!0};setTimeout(function(){return n.abort()},4e3),window[r.target].fetch(t,o).then(function(e){return e.json()}).then(function(t){e.call(null,t.id)})}else i(t,function(t){e.call(null,t.id)})}}])&&o(t.prototype,n),l&&o(t,l),e}();function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var s={},p=0,f=function(){function e(t){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);try{n=new CustomEvent(t.eventName)}catch(e){(n=window.parent.document.createEvent("CustomEvent")).initCustomEvent(t.eventName,!1,!1,{})}window.parent.requestAnimationFrame=window.parent.requestAnimationFrame||window.parent.mozRequestAnimationFrame||window.parent.webkitRequestAnimationFrame,function e(){if(window.parent.requestAnimationFrame(e),o)return!1;o=setTimeout(function(){window.parent.dispatchEvent(n),o=null},t.eventFrequency)}()}var t,n,o;return t=e,(n=[{key:"addListener",value:function(e,t,n,o){return e.addEventListener(t,n,o),s[p]={element:e,type:t,listener:n,capture:o},p++}},{key:"removeListener",value:function(e){if(e in s){var t=s[e];t.element.removeEventListener(t.type,t.listener,t.capture)}}}])&&u(t.prototype,n),o&&u(t,o),e}();function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var g,v,h=function(){for(var e=(+new Date).toString(36),t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n="",o=0;o<32;o++)n+=t[Math.floor(Math.random()*t.length)];return"".concat(e,"-").concat(n)},y=function(){var e,t,n,o=(e=g,t=window.parent.document.cookie||"",("; ".concat(t,";").match("; ".concat(e,"=([^Â¥S;]*)"))||[])[1]||""),r=localStorage.getItem(g)||"";return o.length>8?n=o:r.length>8?n=r:(n=v,w=!0),n},w=!1,b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v=h(),g="".concat(t.prefix,"-id"),this.deviceId=y(),this.rootId=v,this.isNewId=w}var t,n,o;return t=e,(n=[{key:"setDeviceId",value:function(e){this.deviceId=e;try{localStorage.setItem(g,e)}catch(t){window.parent.document.cookie="".concat(g,"=").concat(e,"; Path=/; Max-Age=31536000; SameSite=Lax")}}}])&&m(t.prototype,n),o&&m(t,o),e}();function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var I=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"getPerformanceInfo",value:function(){var e=window.performance.timing,t=e.domInteractive-e.domLoading,n=e.domContentLoadedEventStart-e.domLoading,o=e.domComplete-e.domLoading;return{interactive:t>=0?t:void 0,dcl:n>=0?n:void 0,complete:o>=0?o:void 0}}},{key:"getClientInfo",value:function(e){var t,n,o=navigator.userAgent,r=screen.orientation||screen.mozOrientation||screen.msOrientation||"not-supported";return"object"===k(r)&&(r=r.type),o.match(/iPhone|iPod/g)?(n="iOS",t="Mobile"):o.match(/iPad/g)?(n="iOS",t="Tablet"):o.match(/Android/g)?o.match(/Windows Phone/g)?(n="Windows Phone",t="Mobile"):(n="Android",t=o.match(/Mobile/g)?"Mobile":"Tablet"):o.match(/Windows/g)?(n="Windows",t="Desktop"):o.match(/Mac OS X/g)?(n="Mac OS X",t="Desktop"):o.match(/Linux/g)?(n="Linux",t="Desktop"):o.match(/CrOS/g)?(n="Chrome OS",t="Desktop"):o.match(/Nintendo|PlayStation|Xbox/g)?(n="Other",t="Game"):(n="Other",t="Unknown"),{vpH:window[e].innerHeight,vpW:window[e].innerWidth,scH:window[e].screen.height,scW:window[e].screen.width,scOrientation:r,dvType:t,dvOs:n,dvPlatform:navigator.platform}}},{key:"getMediaInfo",value:function(e){return!!e&&{mdSrc:e.src,mdCurrentTime:Math.round(10*e.currentTime)/10,mdDuration:Math.round(10*e.duration)/10,mdPlayedPercent:Math.round(e.currentTime/e.duration*1e3)/10,mdAttr:{type:e.type||void 0,width:e.clientWidth||void 0,height:e.clientHeight||void 0,muted:e.muted||!1,defaultMuted:e.defaultMuted||!1,autoplay:e.autoplay||!1,playerId:e.playerId||void 0,dataset:e.dataset}}}},{key:"getVisibility",value:function(e,t){var n=0,o={};try{o=e.getBoundingClientRect(),n=e.innerText.length}catch(e){o={}}var r=window[t].innerHeight,i=window[t].document.documentElement.scrollHeight,a=window[t].document.visibilityState||"unknown",c="pageYOffset"in window[t]?window[t].pageYOffset:(window[t].document.documentElement||window[t].document.body.parentNode||window[t].document.body).scrollTop,d=c+r,l=o.height,u=o.top<=0?0:o.top,s=-1*(o.bottom-r)<=0?0:-1*(o.bottom-r),p=d,f=d/i,m=null,g=null,v=!1;return o.top>=0&&o.bottom>r&&o.top>=r?(m=null,g=null,v=!1):o.top>=0&&o.bottom>r&&o.top<r?(m=0,g=r-o.top,v=!0):o.top<0&&o.bottom>r?(g=(m=-1*o.top)+r,v=!0):o.top>=0&&o.bottom<=r?(m=0,g=l,v=!0):o.top<0&&o.bottom>=0&&o.bottom<=r?(m=l+o.top,g=l,v=!0):o.top<0&&o.bottom<0?(m=null,g=null,v=!1):v=!1,{dHeight:i,dIsVisible:a,dVisibleTop:c,dVisibleBottom:d,dScrollUntil:p,dScrollRate:f,tHeight:l,tVisibleTop:m,tVisibleBottom:g,tMarginTop:u,tMarginBottom:s,tScrollUntil:g,tScrollRate:g/l,tViewableRate:(g-m)/l,tIsInView:v,tLength:n}}},{key:"queryMatch",value:function(e,t){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data-trackable",r="button",i=[];for(3===t.nodeType&&(t=t.parentNode);t&&t!==window.parent.document;){var a=(t.matches||t.msMatchesSelector||function(){return!1}).bind(t);t.hasAttribute(o)&&i.unshift(t.getAttribute(o)),!n&&a(e)&&(r="a"===t.tagName.toLowerCase()?"link":t.tagName.toLowerCase(),n=t),t=t.parentNode}return!!(n&&i.length>0)&&{element:n,category:r,path:i.join(">")}}},{key:"mergeObj",value:function(e){for(var t={},n=0;n<e.length;n++)for(var o in e[n])"object"!==k(e[n][o])||null===e[n][o]||Array.isArray(e[n][o])?Array.isArray(e[n][o])?t[o]=t[o]?t[o].concat(e[n][o]):e[n][o]:t[o]=e[n][o]:t[o]=t[o]?this.mergeObj([t[o],e[n][o]]):e[n][o];return t}},{key:"parseUrl",value:function(e){var t,n={},o=document.createElement("a");return e&&(o.href=e,t=o.search.slice(1).split("&").reduce(function(e,t){var n=t.split("=");return e[n[0]]=n[1],e},{}),n={protocol:o.protocol,hostname:o.hostname,port:o.port,pathname:o.pathname,search:o.search,hash:o.hash,query:t}),n}}])&&S(t.prototype,n),o&&S(t,o),e}();function M(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var A,O,T,P,C,L,N,H,D=new Date,j={media:[]},x=new Date,E=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataModel={}}var t,n,o;return t=e,(n=[{key:"config",value:function(e){A=e,L=new I,T=new b({prefix:A.prefix,target:A.targetWindow}),P=new l({endpoint:A.endpoint,apiKey:A.apiKey,sdkName:"JS",sdkVersion:"0.4.1",deviceId:T.deviceId,rootId:T.rootId,target:A.targetWindow}),O=A.targetWindow,N=L.parseUrl(window[O].document.location.href),H=L.parseUrl(window[O].document.referrer)}},{key:"init",value:function(e){this.dataModel=e,this.dataModel.pur=N,this.dataModel.prf=H,A.eventName&&A.eventFrequency&&void 0===C&&(C=new f({eventName:A.eventName,eventFrequency:A.eventFrequency})),"performance"in window[O]&&("interactive"===window[O].document.readyState||"complete"===window[O].document.readyState?this.trackAction("rum","page",{}):this.trackPerformance(O)),A.options&&A.options.unload&&A.options.unload.enable&&this.trackUnload(O),A.options&&A.options.scroll&&A.options.scroll.enable&&this.trackScroll(A.options.scroll.granularity,A.options.scroll.threshold,A.options.scroll.unit,A.eventName),A.options&&A.options.read&&A.options.read.enable&&this.trackRead(A.options.read.granularity,A.options.read.threshold,A.options.read.target,A.eventName),A.options&&A.options.clicks&&A.options.clicks.enable&&this.trackClicks(A.options.clicks.targetAttr),A.options&&A.options.media&&A.options.media.enable&&this.trackMedia(A.options.media.heartbeat)}},{key:"trackAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unknown",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=new Date,r=L.mergeObj([this.dataModel,n,{action:e,category:t,client:L.getClientInfo(O),pt:L.getPerformanceInfo(),sinceInitMs:o.getTime()-D.getTime(),sincePrevMs:o.getTime()-x.getTime()}]);x=o,P.emit(r),T.isNewId?P.getDeviceId(function(e){T.setDeviceId(e),T.isNewId=!1}):T.setDeviceId(T.deviceId)}},{key:"trackPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.trackAction("view","page",e)}},{key:"trackPerformance",value:function(){var e=this;C.removeListener(j.performance),j.performance=C.addListener(window[O].document,"DOMContentLoaded",function(){e.trackAction("rum","page",{})},!1)}},{key:"trackUnload",value:function(){var e,t=this;e="onbeforeunload"in window[O]?"beforeunload":"onpagehide"in window[O]?"pagehide":"unload",C.removeListener(j.unload),j.unload=C.addListener(window[O],e,function(){t.trackAction("unload","page",{})},!1)}},{key:"trackClicks",value:function(e){var t=this;C.removeListener(j.click),j.click=C.addListener(window[O].document.body,"click",function(n){var o=e||"data-trackable",r=L.queryMatch('a, button, input, [role="button"]',n.target,o),i=null;r&&(i=r.element,t.trackAction("click",r.category,{clTag:i.tagName,clId:i.id||void 0,clClass:i.className||void 0,clPath:r.path||void 0,clLink:i.href||void 0,clAttr:i.dataset||void 0}))},!1)}},{key:"trackScroll",value:function(e,t,n,o){var r=this,i=e||20,a=100/i,c=1e3*t||2e3,d={},l=0,u=0,s="percent";C.removeListener(j.scroll),j.scroll=C.addListener(window[O],o,function(){"hidden"!==(d=L.getVisibility(null,O)).dIsVisible&&"prerender"!==d.dIsVisible&&("percent"===n?l=Math.floor(d.dScrollRate*a)*i:(l=d.dScrollUntil,s="pixel"),("percent"===s&&l>u&&l>=0&&l<=100||"pixel"===s&&l>u&&l>=i)&&setTimeout(function(){l>u&&(r.trackAction("scroll","page",{pgH:d.dHeight,srDepth:l,srUnit:s}),u="percent"===s?l:l+i)},c))},!1)}},{key:"trackRead",value:function(e,t,n,o){var r=this;if(n){var i=e||20,a=100/i,c=1e3*t||2e3,d={},l=0,u=0;C.removeListener(j.read),j.read=C.addListener(window[O],o,function(){"hidden"!==(d=L.getVisibility(n,O)).dIsVisible&&"prerender"!==d.dIsVisible&&d.tIsInView&&(l=Math.floor(d.tScrollRate*a)*i)>u&&l>=0&&l<=100&&setTimeout(function(){l>u&&(r.trackAction("read","content",{tgH:d.tHeight,txL:d.tLength,rdRate:l}),u=l)},c)},!1)}}},{key:"trackMedia",value:function(){for(var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,n=["play","pause","ended"],o={},r=0;r<n.length;r++)C.removeListener(j.media[n[r]]),j.media[n[r]]=C.addListener(window[O].document.body,n[r],function(t){e.trackAction(t.type,t.target.tagName.toLowerCase(),L.getMediaInfo(t.target))},{capture:!0});C.removeListener(j.media.timeupdate),j.media.timeupdate=C.addListener(window[O].document,"timeupdate",function(n){if(o[n.target.src])return!1;o[n.target.src]=setTimeout(function(){!0!==n.target.paused&&!0!==n.target.ended&&e.trackAction(n.type,n.target.tagName.toLowerCase(),L.getMediaInfo(n.target)),o[n.target.src]=!1},1e3*t)},{capture:!0})}},{key:"getQueryVal",value:function(e){return N.query[e]?N.query[e]:""}}])&&M(t.prototype,n),o&&M(t,o),e}();window.Ingestly=new E}]);