!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var o,i=function(e,t){var n=new XMLHttpRequest;return"function"==typeof t&&(n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){var e;try{e=JSON.parse(n.response)}catch(e){return e}t.call(null,e)}}),n.open("GET",e,!0),n.timeout=2e3,n.withCredentials=!0,n.send(),!0},a=function(e){var t=(+new Date).toString(36),n=(document.location&&document.location.protocol,"http:");return"".concat(n,"//").concat(o.endpoint,"/").concat(e,"/").concat(t,"/?key=").concat(o.apiKey,"&sdk=").concat(o.sdkName,"-").concat(o.sdkVersion)},c=function(e,t){return void 0!==t&&""!==t&&"{}"!==t?"&".concat(e,"=").concat(encodeURIComponent(t)):""},l=!0,d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=t}var t,n,d;return t=e,(n=[{key:"emit",value:function(e){var t=a("ingestly-ingest"),n={ingestlyId:o.deviceId,rootId:o.rootId,action:e.action,category:e.category,sinceInitMs:e.sinceInitMs,sincePrevMs:e.sincePrevMs,usId:e.userId,usStatus:e.userStatus,usAttr:JSON.stringify(e.userAttr),pgUrl:e.pageUrl,pgReferrer:e.pageReferrer,pgTitle:e.pageTitle,pgAttr:JSON.stringify(e.pageAttr),cnId:e.contentId,cnHeadline:e.contentHeadline,cnStatus:e.contentStatus,cnAttr:JSON.stringify(e.contentAttr),vpHeight:e.client.viewportHeight,vpWidth:e.client.viewportWidth,scHeight:e.client.screenHeight,scWidth:e.client.screenWidth,scOrientation:e.client.screenOrientation,dvType:e.client.deviceType,dvOs:e.client.deviceOs,dvPlatform:e.client.devicePlatform,ptInteractive:e.performance?e.performance.interactive:void 0,ptDcl:e.performance?e.performance.dcl:void 0,ptComplete:e.performance?e.performance.complete:void 0,srDepth:e.scrollDepth,srUnit:e.scrollUnit,pgHeight:e.pageHeight,clTag:e.clickTag,clId:e.clickId,clClass:e.clickClass,clPath:e.clickPath,clLink:e.clickLink,clAttr:JSON.stringify(e.clickAttr),cpCode:e.campaignCode,cpName:e.campaignName,cpSource:e.campaignSource,cpMedium:e.campaignMedium,cpTerm:e.campaignTerm,cpContent:e.campaignContent,urProtocol:e.parsedUrl.protocol,urHost:e.parsedUrl.hostname,urPath:e.parsedUrl.pathname,urSearch:e.parsedUrl.search,urHash:e.parsedUrl.hash,urQuery:JSON.stringify(e.parsedUrl.query),rfProtocol:e.parsedReferrer.protocol,rfHost:e.parsedReferrer.hostname,rfPath:e.parsedReferrer.pathname,rfSearch:e.parsedReferrer.search,rfHash:e.parsedReferrer.hash,rfQuery:JSON.stringify(e.parsedReferrer.query),customAttr:JSON.stringify(e.customAttr)};for(var r in n)t+=c(r,n[r]);if("sendBeacon"in navigator&&"function"==typeof navigator.sendBeacon&&!0===l){try{l=navigator.sendBeacon(t,null)}catch(e){l=!1}l||i(t)}else i(t)}},{key:"getDeviceId",value:function(e){var t=a("ingestly-sync");t+="&deviceId=".concat(o.deviceId),"fetch"in window.parent&&"function"==typeof window.parent.fetch?window.parent.fetch(t).then(function(e){return e.json()}).then(function(t){e.call(null,t.id)}):i(t,function(t){e.call(null,t.id)})}}])&&r(t.prototype,n),d&&r(t,d),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u={},p=0,f=function(){function e(t){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);try{n=new CustomEvent(t.eventName)}catch(e){(n=window.parent.document.createEvent("CustomEvent")).initCustomEvent(t.eventName,!1,!1,{})}window.parent.requestAnimationFrame=window.parent.requestAnimationFrame||window.parent.mozRequestAnimationFrame||window.parent.webkitRequestAnimationFrame,function e(){if(window.parent.requestAnimationFrame(e),r)return!1;r=setTimeout(function(){window.parent.dispatchEvent(n),r=null},t.eventFrequency)}()}var t,n,r;return t=e,(n=[{key:"addListener",value:function(e,t,n,r){return e.addEventListener(t,n,r),u[p]={element:e,type:t,listener:n,capture:r},p++}},{key:"removeListener",value:function(e){if(e in u){var t=u[e];t.element.removeEventListener(t.type,t.listener,t.capture)}}}])&&s(t.prototype,n),r&&s(t,r),e}();function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v,h,g=function(){for(var e=(+new Date).toString(36),t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n="",r=0;r<32;r++)n+=t[Math.floor(Math.random()*t.length)];return"".concat(e,"-").concat(n)},y=function(){var e,t,n,r=(e=v,t=window.parent.document.cookie||"",("; ".concat(t,";").match("; ".concat(e,"=([^Â¥S;]*)"))||[])[1]||""),o=localStorage.getItem(v)||"";return r.length>8?n=r:o.length>8?n=o:(n=h,w=!0),n},w=!1,b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h=g(),v="".concat(t.prefix,"-id"),this.deviceId=y(),this.rootId=h,this.isNewId=w}var t,n,r;return t=e,(n=[{key:"setDeviceId",value:function(e){this.deviceId=e;try{localStorage.setItem(v,e)}catch(t){window.parent.document.cookie="".concat(v,"=").concat(e,"; Path=/; Max-Age=31536000; SameSite=Lax")}}}])&&m(t.prototype,n),r&&m(t,r),e}();function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var I=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getPerformanceInfo",value:function(){var e=window.performance.timing,t=e.domInteractive-e.domLoading,n=e.domContentLoadedEventStart-e.domLoading,r=e.domComplete-e.domLoading;return{interactive:t>=0?t:void 0,dcl:n>=0?n:void 0,complete:r>=0?r:void 0}}},{key:"getClientInfo",value:function(){var e,t,n=screen.orientation||screen.mozOrientation||screen.msOrientation,r=navigator.userAgent;return r.match(/iPhone|iPod/g)?(t="iOS",e="Mobile"):r.match(/iPad/g)?(t="iOS",e="Tablet"):r.match(/Android/g)?r.match(/Windows Phone/g)?(t="Windows Phone",e="Mobile"):(t="Android",e=r.match(/Mobile/g)?"Mobile":"Tablet"):r.match(/Windows/g)?(t="Windows",e="Desktop"):r.match(/Mac OS X/g)?(t="Mac OS X",e="Desktop"):r.match(/Linux/g)?(t="Linux",e="Desktop"):r.match(/CrOS/g)?(t="Chrome OS",e="Desktop"):r.match(/Nintendo|PlayStation|Xbox/g)?(t="Other",e="Game"):(t="Other",e="Unknown"),{viewportHeight:window.parent.innerHeight,viewportWidth:window.parent.innerWidth,screenHeight:window.parent.screen.height,screenWidth:window.parent.screen.width,screenOrientation:n,deviceType:e,deviceOs:t,devicePlatform:navigator.platform}}},{key:"getScrollDepth",value:function(){var e=window.parent.innerHeight,t=window.parent.document.documentElement.scrollHeight,n=window.parent.document.visibilityState||"unknown",r="pageYOffset"in window.parent?window.parent.pageYOffset:(window.parent.document.documentElement||window.parent.document.body.parentNode||window.parent.document.body).scrollTop,o=r+e;return{dHeight:t,dIsVisible:n,dVisibleTop:r,dVisibleBottom:o,dScrollUntil:o,dScrollRate:o/t}}},{key:"queryMatch",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data-trackable",o="button",i=[];for(3===t.nodeType&&(t=t.parentNode);t&&t!==window.parent.document;){var a=(t.matches||t.msMatchesSelector||function(){return!1}).bind(t);t.hasAttribute(r)&&i.unshift(t.getAttribute(r)),!n&&a(e)&&(o="a"===t.tagName.toLowerCase()?"link":t.tagName.toLowerCase(),n=t),t=t.parentNode}return!!(n&&i.length>0)&&{element:n,category:o,path:i.join(">")}}},{key:"mergeObj",value:function(e){for(var t={},n=0;n<e.length;n++)for(var r in e[n])"object"!==k(e[n][r])||null===e[n][r]||Array.isArray(e[n][r])?Array.isArray(e[n][r])?t[r]=t[r]?t[r].concat(e[n][r]):e[n][r]:t[r]=e[n][r]:t[r]=t[r]?this.mergeObj([t[r],e[n][r]]):e[n][r];return t}},{key:"parseUrl",value:function(e){var t,n={},r=document.createElement("a");return e&&(r.href=e,t=r.search.slice(1).split("&").reduce(function(e,t){var n=t.split("=");return e[n[0]]=n[1],e},{}),n={protocol:r.protocol,hostname:r.hostname,port:r.port,pathname:r.pathname,search:r.search,hash:r.hash,query:t}),n}}])&&S(t.prototype,n),r&&S(t,r),e}();function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var A,M,P,C,N=new Date,T={},L=new Date,D=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataModel={},C=new I}var t,n,r;return t=e,(n=[{key:"init",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===A&&(A=new b({prefix:e.prefix})),void 0===M&&(M=new d({endpoint:e.endpoint,apiKey:e.apiKey,sdkName:"JS",sdkVersion:"0.1.0",prefix:e.prefix,cookieDomain:e.cookieDomain,deviceId:A.deviceId,rootId:A.rootId})),this.dataModel=n,e.eventName&&e.eventFrequency&&void 0===P&&(P=new f({eventName:e.eventName,eventFrequency:e.eventFrequency})),"performance"in window.parent&&("interactive"===window.parent.document.readyState||"complete"===window.parent.document.readyState?this.trackAction("rum","page",{}):(P.removeListener(T.performance),T.performance=P.addListener(window.parent.document,"DOMContentLoaded",function(){t.trackAction("rum","page",{})},!1))),e.options&&e.options.scroll&&e.options.scroll.enable){var r=e.options.scroll.granularity||20,o=1e3*e.options.scroll.threshold||2e3,i={},a=0,c=0,l="percent";P.removeListener(T.scroll),T.scroll=P.addListener(window.parent,e.eventName,function(){"hidden"!==(i=C.getScrollDepth()).dIsVisible&&"prerender"!==i.dIsVisible&&("percent"===e.options.scroll.unit?a=Math.round(100*i.dScrollRate/r*100)*r/100:(a=Math.round(100*i.dScrollUntil)/100,l="pixel"),a>c&&a>=0&&setTimeout(function(){a>c&&(t.trackAction("scroll","page",{pageHeight:i.dHeight,scrollDepth:i.dScrollUntil,scrollUnit:l}),c=a)},o))},!1)}e.options&&e.options.clicks&&e.options.clicks.enable&&(P.removeListener(T.click),T.click=P.addListener(window.parent.document.body,"click",function(n){var r=e.options.clicks.targetAttr||"data-trackable",o=C.queryMatch('a, button, input, [role="button"]',n.target,r),i=null;o&&(i=o.element,t.trackAction("click",o.category,{clickTag:i.tagName,clickId:i.id||void 0,clickClass:i.className||void 0,clickPath:o.path||void 0,clickLink:i.href||void 0,clickAttr:i.dataset||void 0}))},!1))}},{key:"trackAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unknown",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Date,o=C.mergeObj([this.dataModel,n,{action:e,category:t,client:C.getClientInfo(),performance:C.getPerformanceInfo(),sinceInitMs:r.getTime()-N.getTime(),sincePrevMs:r.getTime()-L.getTime(),parsedUrl:C.parseUrl(this.dataModel.pageUrl),parsedReferrer:C.parseUrl(this.dataModel.pageReferrer)}]);L=r,M.emit(o),A.isNewId?M.getDeviceId(function(e){A.setDeviceId(e),A.isNewId=!1}):A.setDeviceId(A.deviceId)}},{key:"trackPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.trackAction("view","page",e)}},{key:"getQueryVal",value:function(e){var t=window.parent.location.search.slice(1),n="";if(""!==t)for(var r=t.split("&"),o=r.length,i=0;i<o;++i){var a=r[i].split("=");decodeURIComponent(a[0])===e&&(n=decodeURIComponent(a[1]))}return n}}])&&O(t.prototype,n),r&&O(t,r),e}();window.Ingestly=new D}]);